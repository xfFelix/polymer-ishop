<html><head></head><body><dom-module id="lt-model-page"><template><style include="lt-style">:host{display:block;padding:15px 25px;box-sizing:border-box;}.header{color:rgba(0,0,0,0.6);}.header span:last-child{color :var(--app-primary-blue);}.title{font-size:16px;padding:20px 0;display:flex;justify-content:space-between;align-items:center;}.title .name .series{display:inline-block;padding-left:10px;border-left:2px solid #999;margin-left:5px;}.title .name span:last-child{display:inline-block;margin-left:10px;color:var(--app-primary-blue);}.title .sort .sortItem{display:inline-block;width:100px;height:33px;background:#fff;text-align:center;line-height:33px;color:var(--app-primary-blue);margin-left:10px;border-radius:2px;font-size:14px;}.title .sortItem.iron-selected{background-color:var(--app-primary-blue);color:#fff;}.title .sortItem.down::after{content:url(../../../images/sorting_down.png);top:4px;position:relative;}.title .sortItem.up::after{content:url(../../../images/sorting_up.png);top:4px;position:relative;}.title .sortItem.down.iron-selected::after{content:url(../../../images/sorting_down_selected.png);}.title .sortItem.up.iron-selected::after{content:url(../../../images/sorting_up_selected.png);}.carList{display:flex;flex-wrap:wrap;}footer{text-align:center;}@media screen and (max-width:620px){:host{padding:10px;font-size:14px;}.title{flex-direction:column;align-items:flex-start;}.title .sort .sortItem{margin-top:10px;}.carList{flex-direction:column;}}</style><div class="pageContainer"><div class="header">当前位置：<span>首页</span> &gt; <span>{{vehicleSalesPage.brandName}}</span> &gt; <span>{{vehicleSalesPage.seriesName}}</span></div><div class="title"><div class="name"><span class="brand">{{vehicleSalesPage.brandName}}</span> <span class="series">{{vehicleSalesPage.seriesName}}</span> <span>共有{{vehicleSalesPage.count}}款型号</span></div><div class="sort"><iron-selector fallback-selection="PRICE" selected="{{sortType}}" attr-for-selected="id"><div class="sortItem down" id="PRICE" on-click="_toggleSort">按价格</div></iron-selector></div></div><div class="carList"><template is="dom-repeat" items="{{modelList}}"><lt-model-card data="{{item}}" on-click="_getDetail"></lt-model-card></template></div><footer><paper-spinner active="{{isLoading}}" hidden="{{withoutData}}"></paper-spinner><div hidden="{{!withoutData}}">已加载全部数据</div></footer></div><iron-ajax id="getVehicleSales" method="POST" url="{{_calURL('shop/getVehicleSales')}}" content-type="application/json" handle-as="json" loading="{{isLoading}}" on-response="_responseVehicleSales"></iron-ajax></template><script>var ltModelPage=function(a){function b(){babelHelpers.classCallCheck(this,b);var a=babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a._boundListener=a.scrollFun.bind(a),a}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"_getDetail",value:function(a){var b=a.model.__data.item.uid;location.hash="#/car-detail/"+b}},{key:"_responseVehicleSales",value:function(a){var b=a.detail.response.vehicleSalesPage.vehicleStockSingleViewList||[];0==b.length?this.withoutData=!0:(this.vehicleSalesPage=a.detail.response.vehicleSalesPage,this.withoutData=!1,this.set("modelList",this.modelList.concat(b)))}},{key:"_bodyChange",value:function(a,b){if((a||0==a)&&b){var c,d=this.$[b].className.indexOf("down");c=-1==d?"DESC":"ASC",this.$.getVehicleSales.body={maxResults:this.maxResults,pageNumber:a,sortOrder:c,sortType:b,brandId:this.brandId,seriesId:this.seriesId},this.$.getVehicleSales.generateRequest()}}}],[{key:"is",get:function(){return"lt-model-page"}},{key:"properties",get:function(){return{sortType:String,page:{type:String,observer:"_pageChange"},pageNumber:{type:Number},maxResults:{type:String,value:"6"},withoutData:{type:Boolean,value:!1},modelList:{type:Array,value:function(){return[]}}}}},{key:"observers",get:function(){return["_bodyChange(pageNumber,sortType)"]}}]),babelHelpers.createClass(b,[{key:"scrollEvent",value:function(){var a=this.getScrollTop(),b=this.getScrollHeight(),c=this.getWindowHeight();a+c!=b||this.withoutData||this.pageNumber++}},{key:"scrollFun",value:function(){var a,b=this;a&&clearTimeout(a),a=setTimeout(b.scrollEvent(),50)}},{key:"_pageChange",value:function(a){"model"==a?(this.brandId=localStorage.getItem("brandId"),this.seriesId=localStorage.getItem("seriesId"),this.brandId&&this.seriesId&&(this.set("modelList",[]),0==this.pageNumber?this._bodyChange(0,this.sortType):this.pageNumber=0,window.addEventListener("scroll",this._boundListener))):window.removeEventListener("scroll",this._boundListener)}},{key:"show",value:function(){this.style.display="block"}},{key:"hide",value:function(){this.dispatchEvent(new CustomEvent("hide",{}),!1),this.style.display="none"}},{key:"_toggleSort",value:function(a){var b=a.composedPath()[0];b.id==this.sortType&&(-1==b.className.indexOf("down")?(b.classList.remove("up"),b.classList.add("down")):(b.classList.remove("down"),b.classList.add("up")),this.set("modelList",[]),0==this.pageNumber?this._bodyChange(0,this.sortType):this.pageNumber=0)}}]),b}(ltMixin(Polymer.Element));customElements.define(ltModelPage.is,ltModelPage);</script></dom-module></body></html>