<html><head></head><body><dom-module id="lt-new-car-detail-page"><template><style include="lt-style">:host{box-sizing:border-box;margin:0;padding:0;}*{box-sizing:border-box;}.container .panel{width:100%;height:500px;}.container .panel:first-child{margin-top:40px;}.container .panel:last-child{margin-bottom:70px;}.container .panel:nth-child(odd){background-color:#ffffff;}.container .panel:nth-child(even){background-color:#f5f5f5;}.EXE_NAV{text-align:center;}.EXE_NAV nav{width:100%;padding:4px;background:#fff;position:fixed;left:0;top:0px;z-index:1;box-shadow:2px 2px 2px 2px rgba(0, 0, 0, 0.1);overflow-x:hidden;}.EXE_NAV nav ul{list-style:none;margin:0;cursor:pointer;white-space:nowrap;}.EXE_NAV ul li{display:inline-block;padding:3px 20px;line-height:24px;color:#666;cursor:pointer;}.EXE_NAV ul li.iron-selected{color:#bb210b;border-bottom:2px solid #de3824;}.EXE_NAV ul li:hover{color:#bb210b;}.left{float:left;width:540px;height:360px;padding:20px 10px 10px 10px;}.right{float:left;width:540px;height:360px;padding:10px;text-align:left;}.title{font-size:26px;font-weight:500;}.brand{display:inline-block;margin-right:10px;}.brand::after{content:" | ";}.series{display:inline-block;margin-left:0px;}.model{display:inline-block;color:#999999;font-weight:300;margin-top:8px;}.td_container{display:flex;flex-flow:row nowrap;}.table_icon{width:30px;height:auto;margin:auto 0;}.table_item{display:flex;flex-flow:column;margin-left:5px;}.color_icon{width:18px;height:18px;line-height:18px;margin:15px 5px;border:1px solid #dddddd;float:left;}.color_item{width:100px;height:18px;line-height:18px;margin-top:2px;margin:15px 0;float:left;}.compare{border:1px solid var(--app-primary-orange);color:var(--app-primary-orange);background-color:#fff;}.buy{color:#fff;border:1px solid var(--app-primary-red);background-color:var(--app-primary-red);}table{font-family:arial, sans-serif;border-collapse:collapse;width:100%;margin-bottom:20px;table-layout:fixed;}td,th{border:1px solid #dddddd;min-width:125px;text-align:left;padding:10px;word-wrap:break-word;word-break:break-all;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}tr:nth-child(even){background-color:#f5f5f5;}.unit{color:#999;font-size:14px;line-height:18px;white-space:normal;}.data{font-size:14px;color:#333;line-height:18px;white-space:normal;}.special_feature{width:25%;float:left;text-align:center;}.special_img{width:240px;margin-bottom:10px;height:auto;}.media{margin:0 200px;width:680px;height:auto;border:1px solid #ddd;}#car_img{background-repeat:no-repeat;width:500px;height:440px;border:1px solid #ddd;}.car{width:450px;height:260px;margin-top:90px;margin-left:25px;height:auto;}.price{color:red;margin-top:4px;font-size:40px;line-height:30px;float:left;white-space:nowrap;}.price span{color:#222222;padding:5px;font-size:20px;}.action{display:flex;justify-content:space-between;}.section_title{font-size:30px;text-align:center;padding:18px 0;color:#666666;}.paper_slider{width:100%;--paper-slide-height:auto;}.paper_slider paper-slide img{width:520px;height:300px;padding:1%;border:1px solid #ddd;}.buttons span{display:inline-flex;padding:8px;border-radius:4px;}.buttons img{width:20px;height:20px;}#feature{height:auto;min-height:150px;}#feature .feature_conent{text-align:center;}.order_text{min-width:100px;display:inline-block;background:#ddd;box-sizing:border-box;padding:10px;border:1px solid transparent;border-radius:10px;color:#929292;}.edit_button{color:#fff;background:#f75858;}@media only screen and (max-width:1080px){.left,.right{width:100%;float:none;height:auto;}.actions,.price{float:none;}.paper_slider paper-slide img{width:100%;height:auto;border:1px solid #ddd;}.buttons img{display:none;}.price{font-size:30px;}}.container .panel.mobile{height:auto;}.main_content.mobile{width:100%;}#summary .main_content.mobile .imageBox{height:auto;}#summary .main_content.mobile #car_img{width:100%;height:auto;}#summary .main_content.mobile #car_img img{width:100%;height:auto;margin:0;}#summary .main_content.mobile .table td{min-width:0;}#video .main_content.mobile video{width:100%;height:auto;margin:0 auto;}</style><style>.footer{position:fixed;bottom:0;width:100%;height:60px;background:#ddd;box-sizing:border-box;display:flex;justify-content:space-between;align-items:center;padding:3px;}.footer .user-info{display:flex;justify-content:flex-start;}.footer .user-info .avatar-box img{width:50px;border-radius:50px;}.footer .user-info .name-box{display:flex;flex-direction:column;align-items:center;padding:5px;}.name-box .name{font-weight:600;}.name-box .company{color:#989898;}.buttons{position:relative;}.buttons .editPop{position:absolute;right:calc((100vw - 300px)/2);top:40px;width:300px;background:#fff;padding:5px;z-index:2;display:none;border-radius:12px;}.buttons .editPop.show{display:block;}.generate-button{display:flex;justify-content:space-around;}.generate-button button{max-width:100%;width:auto;border:none;padding:10px;font-size:15px;border-radius:var(--app-radius);background:var(--app-button-bg);color:var(--app-button-text);}.generate-button button.confirm-generate{background:red;}.background{width:100vw;height:100vh;position :fixed;z-index:1;top:0;left:0;display:none;background:#dddddda3;}.background.show{display:block;}.release_time{color:#999999;margin:5px 0;}.suppliers{display:flex;justify-content:space-between;align-items:center;color:#999999;}</style><div class="EXE_NAV"><nav><ul on-click="_selectPanel"><li data-panel="summary" class="panel_title">概观</li><li data-panel="feature" class="panel_title">其他配置</li><li data-panel="photo" class="panel_title">外观／内饰</li><li data-panel="video" class="panel_title">媒体</li></ul></nav></div><section class="container"><div class$="panel {{state}}" id="summary"><div class$="main_content {{state}}"><div class="left imageBox"><div id="car_img" style="background: url(../../../images/default_bg.jpg);"><img class="car" src$="{{data.seriesDefaultImageURL}}"></div></div><div class="right"><div class="title"><div class="brand">{{data.brandName}}</div><div class="series">{{data.seriesName}}</div></div><div class="model">{{data.modelName}}</div><br clear="both"><div class="color_icon" style="background-image:url({{data.bodyColorUrl}});"></div><div class="color_item">外：{{data.bodyColorName}}</div><div class="color_icon" style="background-image:url({{data.interiorColorUrl}});"></div><div class="color_item">内：{{data.interiorColorName}}</div><br clear="both"><div class="suppliers"><div class="release_time"><span>发布时间:</span> <span>{{_formatTime(data.createAt)}}</span></div><div class="suppliersName"><span>{{data.supplierIdentityNo}}</span></div></div><table class="table"><tbody><tr><td><div class="td_container"><div class="table_icon"><img src="./images/emission.png"></div><div class="table_item"><div class="unit">排量</div><div class="data">{{data.engineLayout}}</div></div></div></td><td><div class="td_container"><div class="table_icon"><img src="./images/energy.png"></div><div class="table_item"><div class="unit">能源</div><div class="data">{{data.fuseSource}}</div></div></div></td><td><div class="td_container"><div class="table_icon"><img src="./images/size.png"></div><div class="table_item"><div class="unit">长宽高(mm)</div><div class="data">{{data.lengthWidthHeight}}</div></div></div></td></tr><tr><td><div class="td_container"><div class="table_icon"><img src="./images/engine.png"></div><div class="table_item"><div class="unit">发动机</div><div class="data">{{data.horsePower}}</div></div></div></td><td><div class="td_container"><div class="table_icon"><img src="./images/tranmittion.png"></div><div class="table_item"><div class="unit">变速箱</div><div class="data">{{data.gearBox}}</div></div></div></td><td><div class="td_container"><div class="table_icon"><img src="./images/door.png"></div><div class="table_item"><div class="unit">车门</div><div class="data">{{data.noOfDoors}}</div></div></div></td></tr><tr><td><div class="td_container"><div class="table_icon"><img src="./images/seat.png"></div><div class="table_item"><div class="unit">座位</div><div class="data">{{data.noOfSeat}}</div></div></div></td><td><div class="td_container"><div class="table_icon"><img src="./images/shape.png"></div><div class="table_item"><div class="unit">车型</div><div class="data">{{data.category}}</div></div></div></td><td><div class="td_container"><div class="table_icon"><img src="./images/drive.png"></div><div class="table_item"><div class="unit">驱动</div><div class="data">{{data.engineType}}</div></div></div></td></tr><tr><td><div class="td_container"><div class="table_icon"><img src="./images/fuel.png"></div><div class="table_item"><div class="unit">油箱容积</div><div class="data">{{data.tankCapacity}}</div></div></div></td><td><div class="td_container"><div class="table_icon"><img src="./images/tyre.png"></div><div class="table_item"><div class="unit">轮胎尺寸</div><div class="data">{{data.hubSize}}</div></div></div></td><td><div class="td_container"><div class="table_icon"><img src="./images/oil.png"></div><div class="table_item"><div class="unit">供油方式</div><div class="data">{{data.oilSupply}}</div></div></div></td></tr></tbody></table><div class="action"><div class="price"><span>￥</span>{{data.price}}<span>万</span></div><div class="buttons"><div class$="background {{isShow}}"></div><span class="edit_button" on-click="_edit" hidden="{{!canEdit}}">修改价格</span> <span class="order_text" hidden="{{canPurchase}}"><img class="btn_icon" src="./images/lock.svg">{{orderText}}</span><div class$="editPop {{isShow}}"><div class="userInfo"><h2>请先修改信息</h2><lt-input label="销售人员 姓氏*" autofocus="" value="{{lastName}}" required=""></lt-input><lt-input label="销售人员 名字*" value="{{firstName}}" required=""></lt-input><lt-input id="phoneInput" label="手机*" autocomplete="tel-local" pattern="[0-9]*" prevent-invalid-input="" value="{{phoneNumber}}" required="" error-message="请输入手机号码"></lt-input><lt-input label="价格(万)*" required="" value="{{editedPrice}}"></lt-input></div><div class="generate-button"><button on-click="_generateCard" class="confirm-generate">生成名片</button> <button on-click="_cancleGenerate">取消</button></div></div></div></div></div></div></div><div class$="panel {{state}}" id="feature"><div class$="main_content {{state}}"><div class="section_title">其他配置</div><div class="feature_conent">{{data.vehicleFeatures}}</div></div></div><div class$="panel {{state}}" id="photo"><div class$="main_content {{state}}"><div class="left"><div class="section_title">外观</div><l2t-paper-slider class="paper_slider" auto-progress="" slide-duration="4" total-slides="[[data.outsideSmallImgUrl.length]]"><template is="dom-repeat" items="{{data.outsideSmallImgUrl}}"><paper-slide><img src="{{item}}"></paper-slide></template></l2t-paper-slider></div><div class="right"><div class="section_title">内饰</div><l2t-paper-slider class="paper_slider" total-slides="[[data.insideSmallImgUrl.length]]" auto-progress="" slide-duration="4"><template is="dom-repeat" items="{{data.insideSmallImgUrl}}"><paper-slide><img src="{{item}}"></paper-slide></template></l2t-paper-slider></div></div></div><div class$="panel {{state}}" id="video"><div class$="main_content {{state}}"><div class="section_title">媒体</div><video class="media" src="{{data.seriesShowVideoURL}}" controls="controls"></video></div></div></section><div class="footer" hidden="{{canEdit}}"><div class="user-info"><div class="avatar-box"><img src="../../../images/favicon-96x96.png" alt="公司"></div><div class="name-box"><div class="name">{{data.lastName}} {{data.firstName}}</div><span class="company">领骏达</span></div></div><div class="mobile-box">联系方式： <a href="tel:{{data.phoneNumber}}">{{data.phoneNumber}}</a></div></div><iron-ajax id="getDetail" method="POST" url="{{_calURL('shop/getVehicleDetailsByUid')}}" content-type="application/json" handle-as="json" on-response="_responDetail"></iron-ajax><iron-ajax id="generateCard" method="POST" url="{{_calURL('shop/createVehicleBusinessCard')}}" content-type="application/json" handle-as="json" on-response="_responCreate"></iron-ajax><iron-ajax id="getVehicleBusinessCard" method="POST" url="{{_calURL('shop/getVehicleBusinessCard')}}" content-type="application/json" handle-as="json" on-response="_responBusinessCard"></iron-ajax><iron-ajax id="getWxShare" method="POST" url="{{_calURL('shop/WxShare')}}" content-type="application/json" handle-as="json" on-response="_getWxShare"></iron-ajax></template><script>var ltNewCarDetailPage=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'_responBusinessCard',value:function(a){var b=a.detail.response.vehicleBusinessCard;b.price=b.editedPrice,this.data=b;var c=this.data.brandName+'|'+this.data.seriesName+' '+this.data.modelName;document.title=c,this.$.getWxShare.body='{}',this.$.getWxShare.generateRequest()}},{key:'_generateCard',value:function(){this.lastName&&this.firstName&&this.phoneNumber&&this.editedPrice&&(this.$.generateCard.body={vehicleId:this.vehicleId,firstName:this.firstName,lastName:this.lastName,editedPrice:this.editedPrice,phoneNumber:this.phoneNumber},this.$.generateCard.generateRequest())}},{key:'_responCreate',value:function(a){var b=a.detail.response;window.location='#/new-car-detail/'+b.vehicleBusinessCardUid+'/1',location.reload()}},{key:'_edit',value:function(){-1==navigator.userAgent.indexOf('Chrome')?document.body.scrollTop=669:document.documentElement.scrollTop=669,this.isShow='show'}},{key:'_cancleGenerate',value:function(){this.isShow='',this.firstName='',this.lastName='',this.editedPrice='',this.phoneNumber=''}},{key:'_checkFlag',value:function(a){a?(this.canPurchase=!1,(1==a||2==a)&&(this.orderText='\u8BE5\u8F66\u5DF2\u88AB\u9884\u8BA2'),3==a&&(this.orderText='\u8BE5\u8F66\u5DF2\u88AB\u51FA\u552E')):this.canPurchase=!0}},{key:'_checkId',value:function(a,b,c){a&&'new-car-detail'==b&&(c?(this.canEdit=!1,this.$.getVehicleBusinessCard.body={vehicleBusinessCardUid:a},this.$.getVehicleBusinessCard.generateRequest()):(this.canEdit=!0,this.$.getDetail.body={vehicleId:a},this.$.getDetail.generateRequest()))}},{key:'_responDetail',value:function(a){this.data=a.detail.response[0];var b=this.data.brandName+'|'+this.data.seriesName+' '+this.data.modelName;document.title=b,this.$.getWxShare.body='{}',this.$.getWxShare.generateRequest()}},{key:'setPanel',value:function(a){for(var b=this.shadowRoot.querySelectorAll('.panel_title'),c=0;c<b.length;c++)b[c].classList.remove('iron-selected'),a==b[c].getAttribute('data-panel')&&b[c].classList.add('iron-selected')}},{key:'_selectPanel',value:function(a){var b=a.composedPath();if('LI'==b[0].tagName){var c=b[0].getAttribute('data-panel');this.setPanel(c),this.goPanel(c)}}}],[{key:'is',get:function(){return'lt-new-car-detail-page'}},{key:'properties',get:function(){return{panelsScrollTop:{type:Array,value:function(){return[]}},page:String,flag:String,vehicleId:{type:String},data:{type:Object},state:{type:String},xtest:{type:String,value:function(){return'sansan'}}}}},{key:'observers',get:function(){return['_checkId(vehicleId,page,flag)','_checkFlag(data.flag)']}}]),babelHelpers.createClass(b,[{key:'scrollFun',value:function(){var a,b=this;a&&clearTimeout(a),a=setTimeout(b.scrollEvent(),50)}},{key:'scrollEvent',value:function(){var a=this.getScrollTop();this._panelsOffsetTop();for(var b=0;b<this.panelsScrollTop.length;b++){if(b==this.panelsScrollTop.length-1){this.setPanel(this.panelsScrollTop[b].panel);break}if(this.panelsScrollTop[b].scrollTop<=a&&a<this.panelsScrollTop[b+1].scrollTop){this.setPanel(this.panelsScrollTop[b].panel);break}}}},{key:'ready',value:function(){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'ready',this).call(this),'new-car-detail'==this.getHash()&&this.dispatchEvent(new CustomEvent('header-close',{detail:{msg:'\u5173\u95EDheader',result:!0},bubbles:!0,composed:!0})),this._boundListener=this.scrollFun.bind(this)}},{key:'_panelsOffsetTop',value:function(){for(var a=this.shadowRoot.querySelectorAll('.panel'),b=[],c=0;c<a.length;c++)b.push({panel:a[c].id,scrollTop:a[c].offsetTop-90});this.panelsScrollTop=b}},{key:'goPanel',value:function(a){if(a){var b=this.$[a].offsetTop;document.documentElement.scrollTop=b-90,window.pageYOffset=b-90,document.body.scrollTop=b-90}}},{key:'show',value:function(){this.style.display='block',this._panelsOffsetTop(),this.setPanel('summary'),window.addEventListener('scroll',this._boundListener)}},{key:'hide',value:function(){this.dispatchEvent(new CustomEvent('hide',{}),!1),this.style.display='none',window.removeEventListener('scroll',this._boundListener)}},{key:'_getWxShare',value:function(a){this.wxInit(a.detail.response)}},{key:'wxInit',value:function(a){var b=window.location.href,c=document.title,d=this.data.vehicleFeatures,e=this.data.seriesDefaultImageURL;wx.config({debug:!1,appId:a.appId,timestamp:a.timestamp,nonceStr:a.noncestr,signature:a.signature,jsApiList:['onMenuShareTimeline','onMenuShareAppMessage','onMenuShareQQ','onMenuShareWeibo','onMenuShareQZone']}),wx.ready(function(){wx.onMenuShareTimeline({title:c,desc:d,link:b,imgUrl:e,success:function(){console.log('\u5206\u4EAB\u6210\u529F')},cancel:function(){console.log('\u5206\u4EAB\u5931\u8D25')}}),wx.onMenuShareAppMessage({title:c,desc:d,link:b,imgUrl:e,success:function(){console.log('\u5206\u4EAB\u6210\u529F')},cancel:function(){console.log('\u5206\u4EAB\u5931\u8D25')}}),wx.onMenuShareAppMessage({title:c,desc:d,link:b,imgUrl:e,success:function(){console.log('\u5206\u4EAB\u6210\u529F')},cancel:function(){console.log('\u5206\u4EAB\u5931\u8D25')}}),wx.onMenuShareQQ({title:c,desc:d,link:b,imgUrl:e,success:function(){console.log('\u5206\u4EAB\u6210\u529F')},cancel:function(){console.log('\u5206\u4EAB\u5931\u8D25')}}),wx.onMenuShareWeibo({title:c,desc:d,link:b,imgUrl:e,success:function(){console.log('\u5206\u4EAB\u6210\u529F')},cancel:function(){console.log('\u5206\u4EAB\u5931\u8D25')}}),wx.onMenuShareQZone({title:c,desc:d,link:b,imgUrl:e,success:function(){console.log('\u5206\u4EAB\u6210\u529F')},cancel:function(){console.log('\u5206\u4EAB\u5931\u8D25')}})}),wx.error(function(){console.log('error')})}}]),b}(ltMixin(Polymer.Element));window.customElements.define(ltNewCarDetailPage.is,ltNewCarDetailPage);</script></dom-module></body></html>