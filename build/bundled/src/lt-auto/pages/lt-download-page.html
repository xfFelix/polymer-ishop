<html><head><link rel="import" href="../../../bower_components/polymer/polymer-element.html"><link rel="import" href="../../../bower_components/iron-ajax/iron-ajax.html"><link rel="import" href="../lt-mixin.html"><link rel="import" href="../lt-style.html"></head><body><dom-module id="lt-download-page"><template><style include="lt-style">:host{box-sizing:border-box;margin:0;padding:0;}*{box-sizing:border-box;}</style><div class="pageContainer"><img id="logo" src="./images/app_cover.jpg"></div></template><script>var ltDownloadPage=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"_checkFlag",value:function(a){a?(this.canPurchase=!1,(1==a||2==a)&&(this.orderText="\u8BE5\u8F66\u5DF2\u88AB\u9884\u8BA2"),3==a&&(this.orderText="\u8BE5\u8F66\u5DF2\u88AB\u51FA\u552E")):this.canPurchase=!0}},{key:"_addCompare",value:function(){if(header["X-CustomToken"]){var a=localStorage.getItem("compareIdList");if(a)var b=JSON.parse(a);else b=[];var c=this.data.flag?this.vehicleId+"/"+this.data.flag:this.vehicleId;-1==b.indexOf(c)&&b.push(c),localStorage.setItem("compareIdList",JSON.stringify(b)),this.dispatchEvent(new CustomEvent("confirm",{detail:{msg:"\u6DFB\u52A0\u6210\u529F\uFF01"},bubbles:!0,composed:!0}))}else this.dispatchEvent(new CustomEvent("login",{}),!1)}},{key:"_purchase",value:function(){header["X-CustomToken"]?location.hash="#/purchase/"+this.vehicleId:this.dispatchEvent(new CustomEvent("login",{}),!1)}},{key:"_checkId",value:function(a,b,c){a&&"car-detail"==b&&(this.$.getDetail.body={flag:c?c:0,vehicleId:a},this.$.getDetail.generateRequest())}},{key:"_responDetail",value:function(a){this.data=a.detail.response[0]}},{key:"setPanel",value:function(a){for(var b=this.shadowRoot.querySelectorAll(".panel_title"),c=0;c<b.length;c++)b[c].classList.remove("iron-selected"),a==b[c].getAttribute("data-panel")&&b[c].classList.add("iron-selected")}},{key:"_selectPanel",value:function(a){var b=a.composedPath();if("LI"==b[0].tagName){var c=b[0].getAttribute("data-panel");this.setPanel(c),this.goPanel(c)}}}],[{key:"is",get:function(){return"lt-download-page"}},{key:"properties",get:function(){return{panelsScrollTop:{type:Array,value:function(){return[]}},page:String,flag:String,vehicleId:{type:String},data:{type:Object},state:{type:String}}}},{key:"observers",get:function(){return["_checkId(vehicleId,page,flag)","_checkFlag(data.flag)"]}}]),babelHelpers.createClass(b,[{key:"scrollFun",value:function(){var a,b=this;a&&clearTimeout(a),a=setTimeout(b.scrollEvent(),50)}},{key:"scrollEvent",value:function(){var a=this.getScrollTop();this._panelsOffsetTop();for(var b=0;b<this.panelsScrollTop.length;b++){if(b==this.panelsScrollTop.length-1){this.setPanel(this.panelsScrollTop[b].panel);break}if(this.panelsScrollTop[b].scrollTop<=a&&a<this.panelsScrollTop[b+1].scrollTop){this.setPanel(this.panelsScrollTop[b].panel);break}}}},{key:"ready",value:function(){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"ready",this).call(this),this._boundListener=this.scrollFun.bind(this)}},{key:"_panelsOffsetTop",value:function(){for(var a=this.shadowRoot.querySelectorAll(".panel"),b=[],c=0;c<a.length;c++)b.push({panel:a[c].id,scrollTop:a[c].offsetTop-90});this.panelsScrollTop=b}},{key:"goPanel",value:function(a){if(a){var b=this.$[a].offsetTop;-1==navigator.userAgent.indexOf("Chrome")?document.body.scrollTop=b-90:document.documentElement.scrollTop=b-90}}},{key:"show",value:function(){this.style.display="block",this._panelsOffsetTop(),this.setPanel("summary"),window.addEventListener("scroll",this._boundListener)}},{key:"hide",value:function(){this.dispatchEvent(new CustomEvent("hide",{}),!1),this.style.display="none",window.removeEventListener("scroll",this._boundListener)}}]),b}(ltMixin(Polymer.Element));window.customElements.define(ltDownloadPage.is,ltDownloadPage);</script></dom-module></body></html>