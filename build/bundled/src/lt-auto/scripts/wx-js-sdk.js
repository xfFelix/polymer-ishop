!function(a,b){"function"==typeof define&&(define.amd||define.cmd)?define(function(){return b(a)}):b(a,!0)}(this,function(j,e){function q(b,c,f){j.WeixinJSBridge?WeixinJSBridge.invoke(b,z(c),function(c){a(b,c,f)}):d(b,f)}function i(b,c,f){j.WeixinJSBridge?WeixinJSBridge.on(b,function(d){f&&f.trigger&&f.trigger(d),a(b,d,c)}):f?d(b,f):d(b,c)}function z(a){return a=a||{},a.appId=J.appId,a.verifyAppId=J.appId,a.verifySignType="sha1",a.verifyTimestamp=J.timestamp+"",a.verifyNonceStr=J.nonceStr,a.verifySignature=J.signature,a}function n(a){return{timeStamp:a.timestamp+"",nonceStr:a.nonceStr,package:a.package,paySign:a.paySign,signType:a.signType||"SHA1"}}function o(a){return a.postalCode=a.addressPostalCode,delete a.addressPostalCode,a.provinceName=a.proviceFirstStageName,delete a.proviceFirstStageName,a.cityName=a.addressCitySecondStageName,delete a.addressCitySecondStageName,a.countryName=a.addressCountiesThirdStageName,delete a.addressCountiesThirdStageName,a.detailInfo=a.addressDetailInfo,delete a.addressDetailInfo,a}function a(a,b,d){"openEnterpriseChat"==a&&(b.errCode=b.err_code),delete b.err_code,delete b.err_desc,delete b.err_detail;var e=b.errMsg;e||(e=b.err_msg,delete b.err_msg,e=c(a,e),b.errMsg=e),(d=d||{})._complete&&(d._complete(b),delete d._complete),e=b.errMsg||"",J.debug&&!d.isInnerInvoke&&alert(JSON.stringify(b));var f=e.indexOf(":");switch(e.substring(f+1)){case"ok":d.success&&d.success(b);break;case"cancel":d.cancel&&d.cancel(b);break;default:d.fail&&d.fail(b);}d.complete&&d.complete(b)}function c(a,b){var c=a,d=g[c];d&&(c=d);var e="ok";if(b){var f=b.indexOf(":");"confirm"==(e=b.substring(f+1))&&(e="ok"),"failed"==e&&(e="fail"),-1!=e.indexOf("failed_")&&(e=e.substring(7)),-1!=e.indexOf("fail_")&&(e=e.substring(5)),"access denied"!=(e=(e=e.replace(/_/g," ")).toLowerCase())&&"no permission to execute"!=e||(e="permission denied"),"config"==c&&"function not exist"==e&&(e="ok"),""==e&&(e="fail")}return b=c+":"+e}function r(a){if(a){for(var b=0,c=a.length;b<c;++b){var d=a[b],e=u[d];e&&(a[b]=e)}return a}}function d(a,b){if(!(!J.debug||b&&b.isInnerInvoke)){var c=g[a];c&&(a=c),b&&b._complete&&delete b._complete,console.log("\""+a+"\",",b||"")}}function l(){if(!(D||F||J.debug||"6.0.2">x||0>C.systemType)){var a=new Image;C.appId=J.appId,C.initTime=I.initEndTime-I.initStartTime,C.preVerifyTime=I.preVerifyEndTime-I.preVerifyStartTime,O.getNetworkType({isInnerInvoke:!0,success:function(b){C.networkType=b.networkType;var c="https://open.weixin.qq.com/sdk/report?v="+C.version+"&o="+C.isPreVerifyOk+"&s="+C.systemType+"&c="+C.clientVersion+"&a="+C.appId+"&n="+C.networkType+"&i="+C.initTime+"&p="+C.preVerifyTime+"&u="+C.url;a.src=c}})}}function s(){return new Date().getTime()}function p(a){w&&(j.WeixinJSBridge?a():h.addEventListener&&h.addEventListener("WeixinJSBridgeReady",a,!1))}function f(){O.invoke||(O.invoke=function(a,b,c){j.WeixinJSBridge&&WeixinJSBridge.invoke(a,z(b),c)},O.on=function(a,b){j.WeixinJSBridge&&WeixinJSBridge.on(a,b)})}if(!j.jWeixin){var m,u={config:"preVerifyJSAPI",onMenuShareTimeline:"menu:share:timeline",onMenuShareAppMessage:"menu:share:appmessage",onMenuShareQQ:"menu:share:qq",onMenuShareWeibo:"menu:share:weiboApp",onMenuShareQZone:"menu:share:QZone",previewImage:"imagePreview",getLocation:"geoLocation",openProductSpecificView:"openProductViewWithPid",addCard:"batchAddCard",openCard:"batchViewCard",chooseWXPay:"getBrandWCPayRequest",openEnterpriseRedPacket:"getRecevieBizHongBaoRequest",startSearchBeacons:"startMonitoringBeacons",stopSearchBeacons:"stopMonitoringBeacons",onSearchBeacons:"onBeaconsInRange",consumeAndShareCard:"consumedShareCard",openAddress:"editAddress"},g=function(){var a={};for(var b in u)a[u[b]]=b;return a}(),h=j.document,t=h.title,v=navigator.userAgent.toLowerCase(),y=navigator.platform.toLowerCase(),D=y.match("mac")||y.match("win"),F=-1!=v.indexOf("wxdebugger"),w=-1!=v.indexOf("micromessenger"),G=-1!=v.indexOf("android"),H=-1!=v.indexOf("iphone")||-1!=v.indexOf("ipad"),x=function(){var a=v.match(/micromessenger\/(\d+\.\d+\.\d+)/)||v.match(/micromessenger\/(\d+\.\d+)/);return a?a[1]:""}(),I={initStartTime:s(),initEndTime:0,preVerifyStartTime:0,preVerifyEndTime:0},C={version:1,appId:"",initTime:0,preVerifyTime:0,networkType:"",isPreVerifyOk:1,systemType:H?1:G?2:-1,clientVersion:x,url:encodeURIComponent(location.href)},J={},A={_completes:[]},K={state:0,data:{}};p(function(){I.initEndTime=s()});var L=!1,B=[],O=(m={config:function(a){J=a,d("config",a);var b=!1!==J.check;p(function(){if(b)q(u.config,{verifyJsApiList:r(J.jsApiList)},function(){A._complete=function(a){I.preVerifyEndTime=s(),K.state=1,K.data=a},A.success=function(){C.isPreVerifyOk=0},A.fail=function(a){A._fail?A._fail(a):K.state=-1};var a=A._completes;return a.push(function(){l()}),A.complete=function(){for(var b=0,c=a.length;b<c;++b)a[b]();A._completes=[]},A}()),I.preVerifyStartTime=s();else{K.state=1;for(var a=A._completes,c=0,d=a.length;c<d;++c)a[c]();A._completes=[]}}),J.beta&&f()},ready:function(a){0==K.state?(A._completes.push(a),!w&&J.debug&&a()):a()},error:function(a){"6.0.2">x||(-1==K.state?a(K.data):A._fail=a)},checkJsApi:function(a){var b=function(a){var b=a.checkResult;for(var c in b){var d=g[c];d&&(b[d]=b[c],delete b[c])}return a};q("checkJsApi",{jsApiList:r(a.jsApiList)},(a._complete=function(a){if(G){var c=a.checkResult;c&&(a.checkResult=JSON.parse(c))}a=b(a)},a))},onMenuShareTimeline:function(a){i(u.onMenuShareTimeline,{complete:function(){q("shareTimeline",{title:a.title||t,desc:a.title||t,img_url:a.imgUrl||"",link:a.link||location.href,type:a.type||"link",data_url:a.dataUrl||""},a)}},a)},onMenuShareAppMessage:function(a){i(u.onMenuShareAppMessage,{complete:function(){"favorite"===res.scene?q("sendAppMessage",{title:a.title||t,desc:a.desc||"",link:a.link||location.href,img_url:a.imgUrl||"",type:a.type||"link",data_url:a.dataUrl||""}):q("sendAppMessage",{title:a.title||t,desc:a.desc||"",link:a.link||location.href,img_url:a.imgUrl||"",type:a.type||"link",data_url:a.dataUrl||""},a)}},a)},onMenuShareQQ:function(a){i(u.onMenuShareQQ,{complete:function(){q("shareQQ",{title:a.title||t,desc:a.desc||"",img_url:a.imgUrl||"",link:a.link||location.href},a)}},a)},onMenuShareWeibo:function(a){i(u.onMenuShareWeibo,{complete:function(){q("shareWeiboApp",{title:a.title||t,desc:a.desc||"",img_url:a.imgUrl||"",link:a.link||location.href},a)}},a)},onMenuShareQZone:function(a){i(u.onMenuShareQZone,{complete:function(){q("shareQZone",{title:a.title||t,desc:a.desc||"",img_url:a.imgUrl||"",link:a.link||location.href},a)}},a)},startRecord:function(a){q("startRecord",{},a)},stopRecord:function(a){q("stopRecord",{},a)},onVoiceRecordEnd:function(a){i("onVoiceRecordEnd",a)},playVoice:function(a){q("playVoice",{localId:a.localId},a)},pauseVoice:function(a){q("pauseVoice",{localId:a.localId},a)},stopVoice:function(a){q("stopVoice",{localId:a.localId},a)},onVoicePlayEnd:function(a){i("onVoicePlayEnd",a)},uploadVoice:function(a){q("uploadVoice",{localId:a.localId,isShowProgressTips:0==a.isShowProgressTips?0:1},a)},downloadVoice:function(a){q("downloadVoice",{serverId:a.serverId,isShowProgressTips:0==a.isShowProgressTips?0:1},a)},translateVoice:function(a){q("translateVoice",{localId:a.localId,isShowProgressTips:0==a.isShowProgressTips?0:1},a)},chooseImage:function(a){q("chooseImage",{scene:"1|2",count:a.count||9,sizeType:a.sizeType||["original","compressed"],sourceType:a.sourceType||["album","camera"]},(a._complete=function(a){if(G){var b=a.localIds;b&&(a.localIds=JSON.parse(b))}},a))},getLocation:function(){},previewImage:function(a){q(u.previewImage,{current:a.current,urls:a.urls},a)},uploadImage:function(a){q("uploadImage",{localId:a.localId,isShowProgressTips:0==a.isShowProgressTips?0:1},a)},downloadImage:function(a){q("downloadImage",{serverId:a.serverId,isShowProgressTips:0==a.isShowProgressTips?0:1},a)},getLocalImgData:function(a){!1===L?(L=!0,q("getLocalImgData",{localId:a.localId},(a._complete=function(){if(L=!1,0<B.length){var a=B.shift();wx.getLocalImgData(a)}},a))):B.push(a)},getNetworkType:function(a){var b=function(a){var b=a.errMsg;a.errMsg="getNetworkType:ok";var c=a.subtype;if(delete a.subtype,c)a.networkType=c;else{var d=b.indexOf(":"),e=b.substring(d+1);"wifi"===e||"edge"===e||"wwan"===e?a.networkType=e:a.errMsg="getNetworkType:fail"}return a};q("getNetworkType",{},(a._complete=function(a){a=b(a)},a))},openLocation:function(a){q("openLocation",{latitude:a.latitude,longitude:a.longitude,name:a.name||"",address:a.address||"",scale:a.scale||28,infoUrl:a.infoUrl||""},a)}},babelHelpers.defineProperty(m,"getLocation",function(a){a=a||{},q(u.getLocation,{type:a.type||"wgs84"},(a._complete=function(a){delete a.type},a))}),babelHelpers.defineProperty(m,"hideOptionMenu",function(a){q("hideOptionMenu",{},a)}),babelHelpers.defineProperty(m,"showOptionMenu",function(a){q("showOptionMenu",{},a)}),babelHelpers.defineProperty(m,"closeWindow",function(a){q("closeWindow",{},a=a||{})}),babelHelpers.defineProperty(m,"hideMenuItems",function(a){q("hideMenuItems",{menuList:a.menuList},a)}),babelHelpers.defineProperty(m,"showMenuItems",function(a){q("showMenuItems",{menuList:a.menuList},a)}),babelHelpers.defineProperty(m,"hideAllNonBaseMenuItem",function(a){q("hideAllNonBaseMenuItem",{},a)}),babelHelpers.defineProperty(m,"showAllNonBaseMenuItem",function(a){q("showAllNonBaseMenuItem",{},a)}),babelHelpers.defineProperty(m,"scanQRCode",function(a){q("scanQRCode",{needResult:(a=a||{}).needResult||0,scanType:a.scanType||["qrCode","barCode"]},(a._complete=function(a){if(H){var b=a.resultStr;if(b){var c=JSON.parse(b);a.resultStr=c&&c.scan_code&&c.scan_code.scan_result}}},a))}),babelHelpers.defineProperty(m,"openAddress",function(a){q(u.openAddress,{},(a._complete=function(a){a=o(a)},a))}),babelHelpers.defineProperty(m,"openProductSpecificView",function(a){q(u.openProductSpecificView,{pid:a.productId,view_type:a.viewType||0,ext_info:a.extInfo},a)}),babelHelpers.defineProperty(m,"addCard",function(b){for(var d=b.cardList,e=[],f=0,g=d.length;f<g;++f){var h=d[f],a={card_id:h.cardId,card_ext:h.cardExt};e.push(a)}q(u.addCard,{card_list:e},(b._complete=function(a){var b=a.card_list;if(b){for(var c,d=0,e=(b=JSON.parse(b)).length;d<e;++d)c=b[d],c.cardId=c.card_id,c.cardExt=c.card_ext,c.isSuccess=!!c.is_succ,delete c.card_id,delete c.card_ext,delete c.is_succ;a.cardList=b,delete a.card_list}},b))}),babelHelpers.defineProperty(m,"chooseCard",function(a){q("chooseCard",{app_id:J.appId,location_id:a.shopId||"",sign_type:a.signType||"SHA1",card_id:a.cardId||"",card_type:a.cardType||"",card_sign:a.cardSign,time_stamp:a.timestamp+"",nonce_str:a.nonceStr},(a._complete=function(a){a.cardList=a.choose_card_info,delete a.choose_card_info},a))}),babelHelpers.defineProperty(m,"openCard",function(b){for(var d=b.cardList,e=[],f=0,g=d.length;f<g;++f){var h=d[f],a={card_id:h.cardId,code:h.code};e.push(a)}q(u.openCard,{card_list:e},b)}),babelHelpers.defineProperty(m,"consumeAndShareCard",function(a){q(u.consumeAndShareCard,{consumedCardId:a.cardId,consumedCode:a.code},a)}),babelHelpers.defineProperty(m,"chooseWXPay",function(a){q(u.chooseWXPay,n(a),a)}),babelHelpers.defineProperty(m,"openEnterpriseRedPacket",function(a){q(u.openEnterpriseRedPacket,n(a),a)}),babelHelpers.defineProperty(m,"startSearchBeacons",function(a){q(u.startSearchBeacons,{ticket:a.ticket},a)}),babelHelpers.defineProperty(m,"stopSearchBeacons",function(a){q(u.stopSearchBeacons,{},a)}),babelHelpers.defineProperty(m,"onSearchBeacons",function(a){i(u.onSearchBeacons,a)}),babelHelpers.defineProperty(m,"openEnterpriseChat",function(a){q("openEnterpriseChat",{useridlist:a.userIds,chatname:a.groupName},a)}),m),N=1,E={};return h.addEventListener("error",function(a){if(!G){var b=a.target,c=b.tagName,d=b.src;if(("IMG"==c||"VIDEO"==c||"AUDIO"==c||"SOURCE"==c)&&-1!=d.indexOf("wxlocalresource://")){a.preventDefault(),a.stopPropagation();var e=b["wx-id"];if(e||(e=N++,b["wx-id"]=e),E[e])return;E[e]=!0,wx.ready(function(){wx.getLocalImgData({localId:d,success:function(a){b.src=a.localData}})})}}},!0),h.addEventListener("load",function(a){if(!G){var b=a.target,c=b.tagName;if(b.src,"IMG"==c||"VIDEO"==c||"AUDIO"==c||"SOURCE"==c){var d=b["wx-id"];d&&(E[d]=!1)}}},!0),e&&(j.wx=j.jWeixin=O),O}});